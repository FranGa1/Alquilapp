<!DOCTYPE html>
<html>
  <head>
    <title>Alquilapp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>


  <body>
    <% if notice != nil%>
      <div class="alert alert-success alert-dismissible fade show p-2" role="alert" style="margin-bottom:1px">
          <%= notice %>
          <button type="button" class="btn-close p-2" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    <%end%>
    <% if alert != nil%>
      <div class="alert alert-danger alert-dismissible fade show p-2 d-flex" role="alert">
          <%= alert %>
          <button type="button" class="btn-close p-2" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    <%end%>

    <div class="container">
      <%= yield %>
    </div>

  </body>




    <% if request.original_url.include?("wallets") %>
    <script>
      var form1 = document.getElementById('form1');
    var form2 = document.getElementById('form2');

    var input1 = document.getElementById('formNameOnCard');
    var input2 = document.getElementById('formCardNumber');
    var input3 = document.getElementById('formExpiration');
    var input4 = document.getElementById('formCVV');

    form2.addEventListener('submit', function(e) {
        console.log("submit");
        if (input1.value == "" || input2.value == "" || input3.value == "" || input4.value == "") {
            e.preventDefault();
            alert("Por favor, complete todos los campos de la tarjeta");
        }
    });
    </script>
    <% end %>

  <script>

    function togglePass() {
      eye.classList.toggle("active");
      (password.type == "password") ? password.type = "text" : password.type = "password";
    }

    function togglePass2() {
      eye2.classList.toggle("active");
      (password_confirmation.type == "password") ? password_confirmation.type = "text" : password_confirmation.type = "password";
    }

    // button to make password visible
    var password = document.getElementById("user_password")
    var eye = document.getElementById("eye")


    eye.addEventListener("click", togglePass);

    var password_confirmation = document.getElementById("user_password_confirmation")
    var eye2 = document.getElementById("eye2")

    eye2.addEventListener("click", togglePass2);

    // delete myalert after 5 seconds
    setTimeout(function() {
      var element = document.getElementsByClassName("alert");
      element[0].parentNode.removeChild(element[0]);
    }, 3000);

     var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1; //January is 0!
    var yyyy = today.getFullYear();
    if (dd < 10) {
      dd = '0' + dd;
    }

    if (mm < 10) {
      mm = '0' + mm;
    }

    today = yyyy + '-' + mm + '-' + dd;
    var date = document.getElementById("datefield");
    if (date != null){
      date.setAttribute("max", today);
    }

    var date_valid_until_lnc = document.getElementById("date_valid_until_lnc");
    if (date_valid_until_lnc != null){
      date_valid_until_lnc.setAttribute("min", today);
    }
  </script>
</html>
